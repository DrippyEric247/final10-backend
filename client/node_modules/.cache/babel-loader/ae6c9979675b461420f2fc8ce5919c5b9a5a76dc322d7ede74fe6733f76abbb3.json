{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ericv\\\\final10\\\\client\\\\src\\\\pages\\\\PointsPage.js\",\n  _s = $RefreshSig$();\n// src/pages/PointsPage.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useAppConfig } from '../lib/useAppConfig';\n\n// tiny helpers\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fmt = n => (n !== null && n !== void 0 ? n : 0).toLocaleString();\nconst pct = n => `${Math.round((n !== null && n !== void 0 ? n : 0) * 100)}%`;\nexport default function PointsPage() {\n  _s();\n  const cfg = useAppConfig(); // trialDays, multipliers, badgeTiers, discountRatio, etc.\n  const [loading, setLoading] = useState(true);\n\n  // user data\n  const [balance, setBalance] = useState(0);\n  const [lifetime, setLifetime] = useState(0);\n  const [badges, setBadges] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [trial, setTrial] = useState(null);\n\n  // leaderboard preview\n  const [leaders, setLeaders] = useState([]);\n\n  // redeem UI\n  const [redeemAmt, setRedeemAmt] = useState('');\n  const [toast, setToast] = useState('');\n\n  // countdown text\n  const [countdown, setCountdown] = useState('');\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const me = await fetch('/api/points/me').then(r => r.json());\n        if (!mounted) return;\n        setBalance(me.pointsBalance || 0);\n        setLifetime(me.lifetimePointsEarned || 0);\n        setBadges(me.badges || []);\n        setHistory(me.recent || []);\n        setTrial(me.trial || null);\n      } finally {\n        setLoading(false);\n      }\n    })();\n\n    // leaderboard preview (top 5)\n    fetch('/api/leaderboard/lifetime').then(r => r.json()).then(list => setLeaders(Array.isArray(list) ? list.slice(0, 5) : []));\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  // trial countdown (minutes precision)\n  useEffect(() => {\n    if (!(trial !== null && trial !== void 0 && trial.isActive) || !(trial !== null && trial !== void 0 && trial.endsAt)) return;\n    const tick = () => {\n      const ms = new Date(trial.endsAt) - new Date();\n      if (ms <= 0) {\n        setCountdown('Expired');\n        return;\n      }\n      const d = Math.floor(ms / 86400000);\n      const h = Math.floor(ms % 86400000 / 3600000);\n      const m = Math.floor(ms % 3600000 / 60000);\n      setCountdown(`${d}d ${h}h ${m}m`);\n    };\n    tick();\n    const id = setInterval(tick, 60000);\n    return () => clearInterval(id);\n  }, [trial]);\n\n  // derived: example discount preview\n  const discountPreview = useMemo(() => {\n    const pts = parseInt(redeemAmt || '0', 10);\n    if (!Number.isFinite(pts) || !(cfg !== null && cfg !== void 0 && cfg.discountRatio)) return '$0.00';\n    const usd = pts * cfg.discountRatio;\n    return `$${usd.toFixed(2)}`;\n  }, [redeemAmt, cfg]);\n  const redeem = async () => {\n    const amount = parseInt(redeemAmt || '0', 10);\n    if (!amount || amount <= 0) return setToast('Enter a positive number of points.');\n    if (amount > balance) return setToast('Not enough points to redeem.');\n    const body = {\n      amount,\n      auctionId: window.__AUCTION_ID__ || 'demo-auction',\n      idempotencyKey: crypto.randomUUID()\n    };\n    const resp = await fetch('/api/points/redeem', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    }).then(r => r.json());\n    if (resp !== null && resp !== void 0 && resp.ok) {\n      setToast(`Redeemed ${fmt(amount)} points â†’ ${resp.discountUSD ? `$${resp.discountUSD.toFixed(2)} off` : 'applied'}`);\n      // refresh me\n      const me = await fetch('/api/points/me').then(r => r.json());\n      setBalance(me.pointsBalance || 0);\n      setLifetime(me.lifetimePointsEarned || 0);\n      setBadges(me.badges || []);\n      setHistory(me.recent || []);\n      setRedeemAmt('');\n    } else {\n      setToast((resp === null || resp === void 0 ? void 0 : resp.error) || 'Redeem failed');\n    }\n    setTimeout(() => setToast(''), 2500);\n  };\n  if (!cfg) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 24\n    },\n    children: \"Loading config\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 20\n  }, this);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 24\n    },\n    children: \"Loading points\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      maxWidth: 960,\n      margin: '32px auto',\n      padding: '0 16px'\n    },\n    children: [toast && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#111',\n        color: '#fff',\n        padding: '10px 14px',\n        borderRadius: 8,\n        marginBottom: 16,\n        border: '1px solid #333'\n      },\n      children: toast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 24,\n        padding: 16,\n        borderRadius: 12,\n        background: 'rgba(255,255,255,0.04)',\n        border: '1px solid #2a2a2a'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: '0 0 6px'\n        },\n        children: \"Final10 is Live\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          opacity: 0.9\n        },\n        children: \"AI-powered auctions, SavvyPoints, and product-first social.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12,\n          display: 'flex',\n          gap: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"btn\",\n          href: \"/auctions\",\n          children: \"Browse Auctions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"btn btn-outline\",\n          href: \"/points\",\n          children: \"View Points\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), trial !== null && trial !== void 0 && trial.isActive ? /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 16,\n        padding: 12,\n        borderRadius: 10,\n        background: '#0b2a12',\n        color: '#c6ffd1',\n        border: '1px solid #1f6f33'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Free Trial Active\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), \" \\u2014 \", cfg.trialDays, \" days \\xB7 Bonus \", pct(cfg.trialBonusMultiplier), countdown && countdown !== 'Expired' ? /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          marginLeft: 8,\n          opacity: 0.9\n        },\n        children: [\"\\u2022 Ends in \", countdown]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 51\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location = '/premium',\n        style: {\n          marginLeft: 12,\n          padding: '6px 10px',\n          borderRadius: 8,\n          border: '1px solid #2da160',\n          background: '#1a7f43',\n          color: '#fff'\n        },\n        children: \"Keep the Boost\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginBottom: 16,\n        padding: 12,\n        borderRadius: 10,\n        background: '#2a1a1a',\n        color: '#ffd5d5',\n        border: '1px solid #6f2a2a'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Trial Ended\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this), \" \\u2014 Upgrade to keep accelerated earnings.\", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location = '/premium',\n        style: {\n          marginLeft: 12,\n          padding: '6px 10px',\n          borderRadius: 8,\n          border: '1px solid #b54',\n          background: '#a33',\n          color: '#fff'\n        },\n        children: [\"Get Premium (+\", pct(cfg.premiumBonusMultiplier), \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"card\",\n      style: {\n        marginBottom: 24,\n        padding: 16,\n        borderRadius: 12,\n        border: '1px solid #2a2a2a'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Points\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 24,\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              opacity: 0.8\n            },\n            children: \"Balance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 24,\n              fontWeight: 700\n            },\n            children: [fmt(balance), \" SavvyPoints\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              opacity: 0.8\n            },\n            children: \"Lifetime Earned\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 20,\n              fontWeight: 600\n            },\n            children: fmt(lifetime)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              opacity: 0.8\n            },\n            children: \"Badges\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: badges !== null && badges !== void 0 && badges.length ? badges.map(b => /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                padding: '2px 8px',\n                border: '1px solid #333',\n                borderRadius: 999,\n                marginRight: 6\n              },\n              children: b.name\n            }, b.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 21\n            }, this)) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                opacity: 0.7\n              },\n              children: \"None yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 16,\n          display: 'flex',\n          gap: 10,\n          alignItems: 'center',\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: redeemAmt,\n          onChange: e => setRedeemAmt(e.target.value),\n          placeholder: \"Enter points to redeem\",\n          style: {\n            padding: '8px 10px',\n            borderRadius: 8,\n            border: '1px solid #444',\n            minWidth: 220\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: redeem,\n          className: \"btn\",\n          disabled: !redeemAmt,\n          children: [\"Redeem \\u2192 (\", discountPreview, \" off)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            opacity: 0.8\n          },\n          children: \"Redeemable on any Final10 auction.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"card\",\n      style: {\n        marginBottom: 24,\n        padding: 16,\n        borderRadius: 12,\n        border: '1px solid #2a2a2a'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Recent Activity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), history !== null && history !== void 0 && history.length ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyle: 'none',\n          padding: 0,\n          margin: 0\n        },\n        children: history.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            display: 'flex',\n            gap: 12,\n            padding: '8px 0',\n            borderBottom: '1px solid #222'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: 12,\n              padding: '2px 8px',\n              borderRadius: 999,\n              border: '1px solid #333',\n              textTransform: 'capitalize'\n            },\n            children: item.type.replace('_', ' ')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 600\n            },\n            children: [item.type === 'redeem' || item.type === 'transfer_out' ? '-' : '+', fmt(item.amount)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              opacity: 0.7\n            },\n            children: new Date(item.createdAt).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this), item.source ? /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              opacity: 0.7\n            },\n            children: [\"\\u2022 \", item.source]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 32\n          }, this) : null]\n        }, `history-${item._id || index}-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          opacity: 0.7\n        },\n        children: \"No activity yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"card\",\n      style: {\n        marginBottom: 32,\n        padding: 16,\n        borderRadius: 12,\n        border: '1px solid #2a2a2a'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: 0\n        },\n        children: \"Top Earners \\u2014 Lifetime (Top 5)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), leaders !== null && leaders !== void 0 && leaders.length ? /*#__PURE__*/_jsxDEV(\"ol\", {\n        style: {\n          margin: 0,\n          paddingLeft: 20\n        },\n        children: leaders.map((u, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            padding: '6px 0',\n            display: 'flex',\n            justifyContent: 'space-between'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"@\", u.handle]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: 600\n            },\n            children: fmt(u.lifetimePointsEarned)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 17\n          }, this)]\n        }, `leader-${u._id || u.handle || i}-${i}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          opacity: 0.7\n        },\n        children: \"Leaderboard warming up\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"btn btn-outline\",\n          href: \"/leaderboard\",\n          children: \"View Full Leaderboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      style: {\n        opacity: 0.7,\n        textAlign: 'center',\n        padding: '24px 0'\n      },\n      children: [\"\\xA9 \", new Date().getFullYear(), \" Final10 \\xB7 Stay Earning. Stay Savvy.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n_s(PointsPage, \"nmBxmqiFL3gN0pwr8/h7nae7lic=\", false, function () {\n  return [useAppConfig];\n});\n_c = PointsPage;\nvar _c;\n$RefreshReg$(_c, \"PointsPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useAppConfig","jsxDEV","_jsxDEV","fmt","n","toLocaleString","pct","Math","round","PointsPage","_s","cfg","loading","setLoading","balance","setBalance","lifetime","setLifetime","badges","setBadges","history","setHistory","trial","setTrial","leaders","setLeaders","redeemAmt","setRedeemAmt","toast","setToast","countdown","setCountdown","mounted","me","fetch","then","r","json","pointsBalance","lifetimePointsEarned","recent","list","Array","isArray","slice","isActive","endsAt","tick","ms","Date","d","floor","h","m","id","setInterval","clearInterval","discountPreview","pts","parseInt","Number","isFinite","discountRatio","usd","toFixed","redeem","amount","body","auctionId","window","__AUCTION_ID__","idempotencyKey","crypto","randomUUID","resp","method","headers","JSON","stringify","ok","discountUSD","error","setTimeout","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","className","maxWidth","margin","background","color","borderRadius","marginBottom","border","opacity","marginTop","display","gap","href","trialDays","trialBonusMultiplier","marginLeft","onClick","location","premiumBonusMultiplier","flexWrap","fontSize","fontWeight","length","map","b","marginRight","name","alignItems","type","value","onChange","e","target","placeholder","minWidth","disabled","listStyle","item","index","borderBottom","textTransform","replace","createdAt","source","_id","paddingLeft","u","i","justifyContent","handle","textAlign","getFullYear","_c","$RefreshReg$"],"sources":["C:/Users/ericv/final10/client/src/pages/PointsPage.js"],"sourcesContent":["// src/pages/PointsPage.js\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { useAppConfig } from '../lib/useAppConfig';\r\n\r\n// tiny helpers\r\nconst fmt = n => (n ?? 0).toLocaleString();\r\nconst pct = n => `${Math.round((n ?? 0) * 100)}%`;\r\n\r\nexport default function PointsPage() {\r\n  const cfg = useAppConfig();               // trialDays, multipliers, badgeTiers, discountRatio, etc.\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // user data\r\n  const [balance, setBalance] = useState(0);\r\n  const [lifetime, setLifetime] = useState(0);\r\n  const [badges, setBadges] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [trial, setTrial] = useState(null);\r\n\r\n  // leaderboard preview\r\n  const [leaders, setLeaders] = useState([]);\r\n\r\n  // redeem UI\r\n  const [redeemAmt, setRedeemAmt] = useState('');\r\n  const [toast, setToast] = useState('');\r\n\r\n  // countdown text\r\n  const [countdown, setCountdown] = useState('');\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const me = await fetch('/api/points/me').then(r => r.json());\r\n        if (!mounted) return;\r\n        setBalance(me.pointsBalance || 0);\r\n        setLifetime(me.lifetimePointsEarned || 0);\r\n        setBadges(me.badges || []);\r\n        setHistory(me.recent || []);\r\n        setTrial(me.trial || null);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n\r\n    // leaderboard preview (top 5)\r\n    fetch('/api/leaderboard/lifetime')\r\n      .then(r => r.json())\r\n      .then(list => setLeaders(Array.isArray(list) ? list.slice(0, 5) : []));\r\n\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  // trial countdown (minutes precision)\r\n  useEffect(() => {\r\n    if (!trial?.isActive || !trial?.endsAt) return;\r\n    const tick = () => {\r\n      const ms = new Date(trial.endsAt) - new Date();\r\n      if (ms <= 0) { setCountdown('Expired'); return; }\r\n      const d = Math.floor(ms / 86_400_000);\r\n      const h = Math.floor((ms % 86_400_000) / 3_600_000);\r\n      const m = Math.floor((ms % 3_600_000) / 60_000);\r\n      setCountdown(`${d}d ${h}h ${m}m`);\r\n    };\r\n    tick();\r\n    const id = setInterval(tick, 60_000);\r\n    return () => clearInterval(id);\r\n  }, [trial]);\r\n\r\n  // derived: example discount preview\r\n  const discountPreview = useMemo(() => {\r\n    const pts = parseInt(redeemAmt || '0', 10);\r\n    if (!Number.isFinite(pts) || !cfg?.discountRatio) return '$0.00';\r\n    const usd = pts * cfg.discountRatio;\r\n    return `$${usd.toFixed(2)}`;\r\n  }, [redeemAmt, cfg]);\r\n\r\n  const redeem = async () => {\r\n    const amount = parseInt(redeemAmt || '0', 10);\r\n    if (!amount || amount <= 0) return setToast('Enter a positive number of points.');\r\n    if (amount > balance) return setToast('Not enough points to redeem.');\r\n\r\n    const body = {\r\n      amount,\r\n      auctionId: window.__AUCTION_ID__ || 'demo-auction',\r\n      idempotencyKey: crypto.randomUUID(),\r\n    };\r\n\r\n    const resp = await fetch('/api/points/redeem', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(body),\r\n    }).then(r => r.json());\r\n\r\n    if (resp?.ok) {\r\n      setToast(`Redeemed ${fmt(amount)} points â†’ ${resp.discountUSD ? `$${resp.discountUSD.toFixed(2)} off` : 'applied'}`);\r\n      // refresh me\r\n      const me = await fetch('/api/points/me').then(r => r.json());\r\n      setBalance(me.pointsBalance || 0);\r\n      setLifetime(me.lifetimePointsEarned || 0);\r\n      setBadges(me.badges || []);\r\n      setHistory(me.recent || []);\r\n      setRedeemAmt('');\r\n    } else {\r\n      setToast(resp?.error || 'Redeem failed');\r\n    }\r\n    setTimeout(() => setToast(''), 2500);\r\n  };\r\n\r\n  if (!cfg) return <div style={{ padding: 24 }}>Loading configâ€¦</div>;\r\n  if (loading) return <div style={{ padding: 24 }}>Loading pointsâ€¦</div>;\r\n\r\n  return (\r\n    <div className=\"container\" style={{ maxWidth: 960, margin: '32px auto', padding: '0 16px' }}>\r\n      {toast && (\r\n        <div style={{\r\n          background: '#111', color: '#fff', padding: '10px 14px', borderRadius: 8, marginBottom: 16,\r\n          border: '1px solid #333'\r\n        }}>{toast}</div>\r\n      )}\r\n\r\n      {/* Hero */}\r\n      <section style={{ marginBottom: 24, padding: 16, borderRadius: 12, background: 'rgba(255,255,255,0.04)', border: '1px solid #2a2a2a' }}>\r\n        <h2 style={{ margin: '0 0 6px' }}>Final10 is Live</h2>\r\n        <p style={{ margin: 0, opacity: 0.9 }}>AI-powered auctions, SavvyPoints, and product-first social.</p>\r\n        <div style={{ marginTop: 12, display: 'flex', gap: 10 }}>\r\n          <a className=\"btn\" href=\"/auctions\">Browse Auctions</a>\r\n          <a className=\"btn btn-outline\" href=\"/points\">View Points</a>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Trial banner */}\r\n      {trial?.isActive ? (\r\n        <section style={{ marginBottom: 16, padding: 12, borderRadius: 10, background: '#0b2a12', color: '#c6ffd1', border: '1px solid #1f6f33' }}>\r\n          <strong>Free Trial Active</strong> â€” {cfg.trialDays} days Â· Bonus {pct(cfg.trialBonusMultiplier)}\r\n          {countdown && countdown !== 'Expired' ? <span style={{ marginLeft: 8, opacity: 0.9 }}>â€¢ Ends in {countdown}</span> : null}\r\n          <button\r\n            onClick={() => (window.location = '/premium')}\r\n            style={{ marginLeft: 12, padding: '6px 10px', borderRadius: 8, border: '1px solid #2da160', background: '#1a7f43', color: '#fff' }}\r\n          >\r\n            Keep the Boost\r\n          </button>\r\n        </section>\r\n      ) : (\r\n        <section style={{ marginBottom: 16, padding: 12, borderRadius: 10, background: '#2a1a1a', color: '#ffd5d5', border: '1px solid #6f2a2a' }}>\r\n          <strong>Trial Ended</strong> â€” Upgrade to keep accelerated earnings.\r\n          <button\r\n            onClick={() => (window.location = '/premium')}\r\n            style={{ marginLeft: 12, padding: '6px 10px', borderRadius: 8, border: '1px solid #b54', background: '#a33', color: '#fff' }}\r\n          >\r\n            Get Premium (+{pct(cfg.premiumBonusMultiplier)})\r\n          </button>\r\n        </section>\r\n      )}\r\n\r\n      {/* Balance & Redeem */}\r\n      <section className=\"card\" style={{ marginBottom: 24, padding: 16, borderRadius: 12, border: '1px solid #2a2a2a' }}>\r\n        <h3 style={{ marginTop: 0 }}>Points</h3>\r\n        <div style={{ display: 'flex', gap: 24, flexWrap: 'wrap' }}>\r\n          <div>\r\n            <div style={{ opacity: 0.8 }}>Balance</div>\r\n            <div style={{ fontSize: 24, fontWeight: 700 }}>{fmt(balance)} SavvyPoints</div>\r\n          </div>\r\n          <div>\r\n            <div style={{ opacity: 0.8 }}>Lifetime Earned</div>\r\n            <div style={{ fontSize: 20, fontWeight: 600 }}>{fmt(lifetime)}</div>\r\n          </div>\r\n          <div>\r\n            <div style={{ opacity: 0.8 }}>Badges</div>\r\n            <div>\r\n              {badges?.length\r\n                ? badges.map(b => (\r\n                    <span key={b.name} style={{ padding: '2px 8px', border: '1px solid #333', borderRadius: 999, marginRight: 6 }}>\r\n                      {b.name}\r\n                    </span>\r\n                  ))\r\n                : <span style={{ opacity: 0.7 }}>None yet</span>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 16, display: 'flex', gap: 10, alignItems: 'center', flexWrap: 'wrap' }}>\r\n          <input\r\n            type=\"number\"\r\n            value={redeemAmt}\r\n            onChange={e => setRedeemAmt(e.target.value)}\r\n            placeholder=\"Enter points to redeem\"\r\n            style={{ padding: '8px 10px', borderRadius: 8, border: '1px solid #444', minWidth: 220 }}\r\n          />\r\n          <button onClick={redeem} className=\"btn\" disabled={!redeemAmt}>\r\n            Redeem â†’ ({discountPreview} off)\r\n          </button>\r\n          <div style={{ opacity: 0.8 }}>Redeemable on any Final10 auction.</div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Recent Activity */}\r\n      <section className=\"card\" style={{ marginBottom: 24, padding: 16, borderRadius: 12, border: '1px solid #2a2a2a' }}>\r\n        <h3 style={{ marginTop: 0 }}>Recent Activity</h3>\r\n        {history?.length ? (\r\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n            {history.map((item, index) => (\r\n              <li key={`history-${item._id || index}-${index}`} style={{ display: 'flex', gap: 12, padding: '8px 0', borderBottom: '1px solid #222' }}>\r\n                <span style={{\r\n                  fontSize: 12, padding: '2px 8px', borderRadius: 999,\r\n                  border: '1px solid #333', textTransform: 'capitalize'\r\n                }}>\r\n                  {item.type.replace('_',' ')}\r\n                </span>\r\n                <span style={{ fontWeight: 600 }}>\r\n                  {(item.type === 'redeem' || item.type === 'transfer_out' ? '-' : '+')}{fmt(item.amount)}\r\n                </span>\r\n                <span style={{ opacity: 0.7 }}>{new Date(item.createdAt).toLocaleString()}</span>\r\n                {item.source ? <span style={{ opacity: 0.7 }}>â€¢ {item.source}</span> : null}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        ) : (\r\n          <div style={{ opacity: 0.7 }}>No activity yet.</div>\r\n        )}\r\n      </section>\r\n\r\n      {/* Leaderboard preview */}\r\n      <section className=\"card\" style={{ marginBottom: 32, padding: 16, borderRadius: 12, border: '1px solid #2a2a2a' }}>\r\n        <h3 style={{ marginTop: 0 }}>Top Earners â€” Lifetime (Top 5)</h3>\r\n        {leaders?.length ? (\r\n          <ol style={{ margin: 0, paddingLeft: 20 }}>\r\n            {leaders.map((u, i) => (\r\n              <li key={`leader-${u._id || u.handle || i}-${i}`} style={{ padding: '6px 0', display: 'flex', justifyContent: 'space-between' }}>\r\n                <span>@{u.handle}</span>\r\n                <span style={{ fontWeight: 600 }}>{fmt(u.lifetimePointsEarned)}</span>\r\n              </li>\r\n            ))}\r\n          </ol>\r\n        ) : (\r\n          <div style={{ opacity: 0.7 }}>Leaderboard warming upâ€¦</div>\r\n        )}\r\n        <div style={{ marginTop: 10 }}>\r\n          <a className=\"btn btn-outline\" href=\"/leaderboard\">View Full Leaderboard</a>\r\n        </div>\r\n      </section>\r\n\r\n      <footer style={{ opacity: 0.7, textAlign: 'center', padding: '24px 0' }}>\r\n        Â© {new Date().getFullYear()} Final10 Â· Stay Earning. Stay Savvy.\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}