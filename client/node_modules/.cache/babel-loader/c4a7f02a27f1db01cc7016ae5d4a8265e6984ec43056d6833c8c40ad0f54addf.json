{"ast":null,"code":"import _objectSpread from\"C:/Users/ericv/final10/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import{useNavigate}from'react-router-dom';import{User,Settings,Award,Calendar,Target,CheckCircle,Clock,Share2,Search,Eye,Gift,Star,TrendingUp,Users}from'lucide-react';import{useAuth}from'../context/AuthContext';import{getDailyTasks,claimDailyLogin,watchAd,trackAppShare,trackProductShare,completeSocialPost,getLevelInfo,getMilestones,getLevelStats}from'../lib/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{var _levelInfo$xpInfo,_levelInfo$xpInfo2,_tasks$dailyLogin,_tasks$dailyLogin2,_tasks$dailyLogin3,_tasks$search,_tasks$search2,_tasks$search3,_tasks$search4,_tasks$search5,_tasks$search6,_tasks$watchAds,_tasks$watchAds2,_tasks$watchAds3,_tasks$watchAds4,_tasks$watchAds5,_tasks$watchAds6,_tasks$shareApp,_tasks$shareApp2,_tasks$shareApp3,_tasks$shareApp4,_tasks$shareApp5,_tasks$shareApp6,_tasks$shareProduct,_tasks$shareProduct2,_tasks$shareProduct3,_tasks$socialPost,_tasks$socialPost2,_tasks$socialPost3,_tasks$useVideoScanne,_tasks$useVideoScanne2,_tasks$useVideoScanne3,_tasks$searchLocalDea,_tasks$searchLocalDea2,_tasks$searchLocalDea3;const{user}=useAuth();const queryClient=useQueryClient();const navigate=useNavigate();const[showAdModal,setShowAdModal]=useState(false);const[socialPostData,setSocialPostData]=useState({platform:'',postUrl:''});const[pointsUpdating,setPointsUpdating]=useState(false);const[showSuccessMessage,setShowSuccessMessage]=useState('');// Fetch daily tasks\nconst{data:tasksData,isLoading,error}=useQuery({queryKey:['dailyTasks'],queryFn:getDailyTasks,enabled:!!user,refetchInterval:false,// Disable automatic refetching to prevent rate limiting\nrefetchOnWindowFocus:false,// Disable refetch on window focus\nonSuccess:data=>{console.log('Daily tasks data received:',data);},onError:error=>{console.error('Daily tasks fetch error:',error);if(error.status===429){console.warn('Rate limited - will retry later');}}});// Fetch level information\nconst{data:levelData,isLoading:levelLoading}=useQuery({queryKey:['levelInfo'],queryFn:getLevelInfo,enabled:!!user,refetchInterval:false,// Disable automatic refetching to prevent rate limiting\nrefetchOnWindowFocus:false,// Disable refetch on window focus\nonError:error=>{console.error('Level info fetch error:',error);if(error.status===429){console.warn('Rate limited - will retry later');}}});// Fetch milestones\nconst{data:milestonesData}=useQuery({queryKey:['milestones'],queryFn:getMilestones,enabled:!!user});// Fetch level stats\nconst{data:statsData}=useQuery({queryKey:['levelStats'],queryFn:getLevelStats,enabled:!!user});// Mutations for task actions\nconst claimLoginMutation=useMutation({mutationFn:claimDailyLogin,onSuccess:data=>{console.log('Daily login claimed successfully:',data);setPointsUpdating(true);setShowSuccessMessage(\"+\".concat(data.pointsEarned||50,\" points earned!\"));// Invalidate all related queries to refresh the UI\nqueryClient.invalidateQueries(['dailyTasks']);queryClient.invalidateQueries(['levelInfo']);queryClient.invalidateQueries(['levelStats']);queryClient.invalidateQueries(['milestones']);// Force refetch of daily tasks to get updated points\nqueryClient.refetchQueries(['dailyTasks']).finally(()=>{setPointsUpdating(false);setTimeout(()=>setShowSuccessMessage(''),3000);});},onError:error=>{console.error('Daily login claim failed:',error);setPointsUpdating(false);const errorMessage=error.status===429?'Too many requests. Please wait a moment and try again.':error.message||'Unknown error';alert('Failed to claim daily login: '+errorMessage);}});const watchAdMutation=useMutation({mutationFn:watchAd,onSuccess:data=>{console.log('Ad watched successfully:',data);setPointsUpdating(true);queryClient.invalidateQueries(['dailyTasks']);queryClient.invalidateQueries(['levelInfo']);queryClient.invalidateQueries(['levelStats']);queryClient.invalidateQueries(['milestones']);queryClient.refetchQueries(['dailyTasks']).finally(()=>{setPointsUpdating(false);});setShowAdModal(false);},onError:error=>{console.error('Watch ad failed:',error);setPointsUpdating(false);const errorMessage=error.status===429?'Too many requests. Please wait a moment and try again.':error.message||'Unknown error';alert('Failed to watch ad: '+errorMessage);}});const shareAppMutation=useMutation({mutationFn:trackAppShare,onSuccess:data=>{console.log('App shared successfully:',data);queryClient.invalidateQueries(['dailyTasks']);queryClient.invalidateQueries(['levelInfo']);queryClient.invalidateQueries(['levelStats']);queryClient.invalidateQueries(['milestones']);queryClient.refetchQueries(['dailyTasks']);},onError:error=>{console.error('Share app failed:',error);alert('Failed to share app: '+(error.message||'Unknown error'));}});const shareProductMutation=useMutation({mutationFn:_ref=>{let{productId,productTitle}=_ref;return trackProductShare(productId,productTitle);},onSuccess:data=>{console.log('Product shared successfully:',data);queryClient.invalidateQueries(['dailyTasks']);queryClient.invalidateQueries(['levelInfo']);queryClient.invalidateQueries(['levelStats']);queryClient.invalidateQueries(['milestones']);queryClient.refetchQueries(['dailyTasks']);},onError:error=>{console.error('Share product failed:',error);alert('Failed to share product: '+(error.message||'Unknown error'));}});const socialPostMutation=useMutation({mutationFn:_ref2=>{let{platform,postUrl}=_ref2;return completeSocialPost(platform,postUrl);},onSuccess:data=>{console.log('Social post completed successfully:',data);queryClient.invalidateQueries(['dailyTasks']);queryClient.invalidateQueries(['levelInfo']);queryClient.invalidateQueries(['levelStats']);queryClient.invalidateQueries(['milestones']);queryClient.refetchQueries(['dailyTasks']);setSocialPostData({platform:'',postUrl:''});},onError:error=>{console.error('Social post failed:',error);alert('Failed to complete social post: '+(error.message||'Unknown error'));}});const handleWatchAd=()=>{setShowAdModal(true);// Simulate ad watching\nsetTimeout(()=>{watchAdMutation.mutate();},3000);};const handleShareApp=()=>{// Prompt user for share URL and platform\nconst shareUrl=prompt('Please paste the URL of your share post (Twitter, Facebook, etc.):');const platform=prompt('What platform did you share on? (twitter, facebook, instagram, etc.):');if(!shareUrl||!platform){alert('Both share URL and platform are required for verification.');return;}shareAppMutation.mutate({shareUrl,platform});};const handleShareProduct=()=>{// Prompt user for product details and share URL\nconst productId=prompt('Enter the product ID:')||'mock-product-123';const productTitle=prompt('Enter the product title:')||'Sample Product';const shareUrl=prompt('Please paste the URL of your product share post:');const platform=prompt('What platform did you share on? (twitter, facebook, instagram, etc.):');if(!shareUrl||!platform){alert('Both share URL and platform are required for verification.');return;}shareProductMutation.mutate({productId,productTitle,shareUrl,platform});};const handleSocialPost=()=>{if(socialPostData.platform&&socialPostData.postUrl){socialPostMutation.mutate(socialPostData);}};if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-900 pt-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white mb-4\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Please login to view your profile and daily tasks\"})]})})});}if(isLoading||levelLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-900 pt-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mt-4\",children:\"Loading your profile...\"})]})})});}const dailyTasks=(tasksData===null||tasksData===void 0?void 0:tasksData.dailyTasks)||{};const tasks=dailyTasks.tasks||{};const allTasksCompleted=dailyTasks.allTasksCompleted||false;const levelInfo=(levelData===null||levelData===void 0?void 0:levelData.level)||{};const milestones=(milestonesData===null||milestonesData===void 0?void 0:milestonesData.milestones)||[];const stats=(statsData===null||statsData===void 0?void 0:statsData.stats)||{};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-900 pt-20\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-white mb-2\",children:\"Profile\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-400\",children:[\"Welcome back, \",user.firstName||user.username,\"!\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-purple-400 flex items-center gap-2\",children:[pointsUpdating&&/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-400\"}),(tasksData===null||tasksData===void 0?void 0:tasksData.totalPoints)||0,\" pts\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>{queryClient.refetchQueries(['dailyTasks']);queryClient.refetchQueries(['levelInfo']);},className:\"ml-2 text-xs bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded\",title:\"Refresh points\",children:\"\\uD83D\\uDD04\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400\",children:[(tasksData===null||tasksData===void 0?void 0:tasksData.userTier)||'free',\" tier\"]}),showSuccessMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-400 font-medium mt-1 animate-pulse\",children:showSuccessMessage})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.1},className:\"bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-xl p-6 mb-8 border border-purple-500/30\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-500/20 p-3 rounded-lg\",children:/*#__PURE__*/_jsx(Award,{className:\"h-6 w-6 text-purple-400\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-white\",children:[\"Level \",levelInfo.currentLevel||1]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-400\",children:[levelInfo.totalXP||0,\" Total XP\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-purple-400\",children:[levelInfo.xpToNextLevel||100,\" XP to next level\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400\",children:[\"Level \",levelInfo.currentLevel||1,\" \\u2192 \",levelInfo.currentLevel+1||2]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-700 rounded-full h-3 mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500\",style:{width:\"\".concat(levelInfo.xpInfo?levelInfo.xpInfo.xpProgress/levelInfo.xpInfo.xpRange*100:0,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-gray-400\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[((_levelInfo$xpInfo=levelInfo.xpInfo)===null||_levelInfo$xpInfo===void 0?void 0:_levelInfo$xpInfo.currentLevelStart)||0,\" XP\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[((_levelInfo$xpInfo2=levelInfo.xpInfo)===null||_levelInfo$xpInfo2===void 0?void 0:_levelInfo$xpInfo2.nextLevelStart)||100,\" XP\"]})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.2},className:\"bg-gray-800 rounded-xl p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-6 w-6 text-purple-400\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-white\",children:\"Daily Tasks\"})]}),allTasksCompleted&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-green-500/20 text-green-400 px-3 py-1 rounded-full\",children:[/*#__PURE__*/_jsx(Gift,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"All Complete!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4\",children:[/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(Target,{className:\"h-5 w-5\"}),title:\"Daily Login\",description:\"Log in to claim your daily points\",points:50,completed:((_tasks$dailyLogin=tasks.dailyLogin)===null||_tasks$dailyLogin===void 0?void 0:_tasks$dailyLogin.completed)||false,onAction:()=>claimLoginMutation.mutate(),actionText:(_tasks$dailyLogin2=tasks.dailyLogin)!==null&&_tasks$dailyLogin2!==void 0&&_tasks$dailyLogin2.completed?\"Already Claimed\":\"Claim\",loading:claimLoginMutation.isPending,disabled:((_tasks$dailyLogin3=tasks.dailyLogin)===null||_tasks$dailyLogin3===void 0?void 0:_tasks$dailyLogin3.completed)||false}),/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(Search,{className:\"h-5 w-5\"}),title:\"Search for Products\",description:\"Search for \".concat(((_tasks$search=tasks.search)===null||_tasks$search===void 0?void 0:_tasks$search.target)||1,\" product(s) to earn points\"),points:25,completed:((_tasks$search2=tasks.search)===null||_tasks$search2===void 0?void 0:_tasks$search2.completed)||false,progress:((_tasks$search3=tasks.search)===null||_tasks$search3===void 0?void 0:_tasks$search3.progress)||0,target:((_tasks$search4=tasks.search)===null||_tasks$search4===void 0?void 0:_tasks$search4.target)||1,actionText:(_tasks$search5=tasks.search)!==null&&_tasks$search5!==void 0&&_tasks$search5.completed?\"Completed\":\"Search Now\",onAction:()=>navigate('/auctions'),disabled:((_tasks$search6=tasks.search)===null||_tasks$search6===void 0?void 0:_tasks$search6.completed)||false}),/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5\"}),title:\"Watch Ads\",description:\"Watch \".concat(((_tasks$watchAds=tasks.watchAds)===null||_tasks$watchAds===void 0?void 0:_tasks$watchAds.target)||5,\" ads for extra searches\"),points:50,completed:((_tasks$watchAds2=tasks.watchAds)===null||_tasks$watchAds2===void 0?void 0:_tasks$watchAds2.completed)||false,progress:((_tasks$watchAds3=tasks.watchAds)===null||_tasks$watchAds3===void 0?void 0:_tasks$watchAds3.progress)||0,target:((_tasks$watchAds4=tasks.watchAds)===null||_tasks$watchAds4===void 0?void 0:_tasks$watchAds4.target)||5,onAction:handleWatchAd,actionText:(_tasks$watchAds5=tasks.watchAds)!==null&&_tasks$watchAds5!==void 0&&_tasks$watchAds5.completed?\"Completed\":\"Watch Ad\",loading:watchAdMutation.isPending,disabled:((_tasks$watchAds6=tasks.watchAds)===null||_tasks$watchAds6===void 0?void 0:_tasks$watchAds6.completed)||false}),/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(Share2,{className:\"h-5 w-5\"}),title:\"Share App\",description:\"Share Final10 with \".concat(((_tasks$shareApp=tasks.shareApp)===null||_tasks$shareApp===void 0?void 0:_tasks$shareApp.target)||3,\" friends\"),points:300,completed:((_tasks$shareApp2=tasks.shareApp)===null||_tasks$shareApp2===void 0?void 0:_tasks$shareApp2.completed)||false,progress:((_tasks$shareApp3=tasks.shareApp)===null||_tasks$shareApp3===void 0?void 0:_tasks$shareApp3.progress)||0,target:((_tasks$shareApp4=tasks.shareApp)===null||_tasks$shareApp4===void 0?void 0:_tasks$shareApp4.target)||3,onAction:handleShareApp,actionText:(_tasks$shareApp5=tasks.shareApp)!==null&&_tasks$shareApp5!==void 0&&_tasks$shareApp5.completed?\"Completed\":\"Share\",loading:shareAppMutation.isPending,disabled:((_tasks$shareApp6=tasks.shareApp)===null||_tasks$shareApp6===void 0?void 0:_tasks$shareApp6.completed)||false}),/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(TrendingUp,{className:\"h-5 w-5\"}),title:\"Share Product\",description:\"Share a product you found to earn points\",points:75,completed:((_tasks$shareProduct=tasks.shareProduct)===null||_tasks$shareProduct===void 0?void 0:_tasks$shareProduct.completed)||false,onAction:handleShareProduct,actionText:(_tasks$shareProduct2=tasks.shareProduct)!==null&&_tasks$shareProduct2!==void 0&&_tasks$shareProduct2.completed?\"Completed\":\"Share Product\",loading:shareProductMutation.isPending,disabled:((_tasks$shareProduct3=tasks.shareProduct)===null||_tasks$shareProduct3===void 0?void 0:_tasks$shareProduct3.completed)||false}),/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(Users,{className:\"h-5 w-5\"}),title:\"Social Media Post\",description:\"Post your Final10 win with #StayEarning #StaySavvy\",points:300,completed:((_tasks$socialPost=tasks.socialPost)===null||_tasks$socialPost===void 0?void 0:_tasks$socialPost.completed)||false,onAction:()=>setSocialPostData({platform:'twitter',postUrl:''}),actionText:(_tasks$socialPost2=tasks.socialPost)!==null&&_tasks$socialPost2!==void 0&&_tasks$socialPost2.completed?\"Completed\":\"Complete Post\",disabled:((_tasks$socialPost3=tasks.socialPost)===null||_tasks$socialPost3===void 0?void 0:_tasks$socialPost3.completed)||false}),/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\uD83E\\uDD16\"}),title:\"Use AI Video Scanner\",description:\"Use the AI video scanner to identify products\",points:20,completed:((_tasks$useVideoScanne=tasks.useVideoScanner)===null||_tasks$useVideoScanne===void 0?void 0:_tasks$useVideoScanne.completed)||false,onAction:()=>window.location.href='/scanner',actionText:(_tasks$useVideoScanne2=tasks.useVideoScanner)!==null&&_tasks$useVideoScanne2!==void 0&&_tasks$useVideoScanne2.completed?\"Completed\":\"Use Scanner\",disabled:((_tasks$useVideoScanne3=tasks.useVideoScanner)===null||_tasks$useVideoScanne3===void 0?void 0:_tasks$useVideoScanne3.completed)||false}),/*#__PURE__*/_jsx(TaskCard,{icon:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\uD83C\\uDFEA\"}),title:\"Search for a Local Deal\",description:\"Search for local deals on OfferUp and local marketplaces\",points:25,completed:((_tasks$searchLocalDea=tasks.searchLocalDeals)===null||_tasks$searchLocalDea===void 0?void 0:_tasks$searchLocalDea.completed)||false,onAction:()=>window.location.href='/local-deals',actionText:(_tasks$searchLocalDea2=tasks.searchLocalDeals)!==null&&_tasks$searchLocalDea2!==void 0&&_tasks$searchLocalDea2.completed?\"Completed\":\"Search Local Deals\",disabled:((_tasks$searchLocalDea3=tasks.searchLocalDeals)===null||_tasks$searchLocalDea3===void 0?void 0:_tasks$searchLocalDea3.completed)||false})]}),allTasksCompleted&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-lg border border-purple-500/30\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Star,{className:\"h-6 w-6 text-yellow-400\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-white\",children:\"Daily Bonus Unlocked!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-300\",children:\"Complete all tasks to earn 1000 bonus points!\"})]})]})})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.4},className:\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(Award,{className:\"h-6 w-6 text-purple-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white\",children:\"Total Points\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-purple-400\",children:(tasksData===null||tasksData===void 0?void 0:tasksData.totalPoints)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Lifetime earned\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(User,{className:\"h-6 w-6 text-blue-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white\",children:\"Membership\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-400 capitalize\",children:(tasksData===null||tasksData===void 0?void 0:tasksData.userTier)||'Free'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Current tier\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-6 w-6 text-green-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white\",children:\"Tasks Today\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-400\",children:Object.values(tasks).filter(task=>task.completed).length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mt-2\",children:\"Completed\"})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.5},className:\"bg-gray-800 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-6\",children:[/*#__PURE__*/_jsx(Star,{className:\"h-6 w-6 text-yellow-400\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-white\",children:\"Milestones\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:milestones.map((milestone,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg border \".concat(milestone.achieved?'bg-green-500/10 border-green-500/30':'bg-gray-700/50 border-gray-600'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl\",children:milestone.icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold \".concat(milestone.achieved?'text-green-400':'text-gray-400'),children:milestone.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Level \",milestone.level]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400 mb-2\",children:milestone.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-purple-400\",children:[\"+\",milestone.reward,\" points\"]}),milestone.achieved&&/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 text-green-400\"})]})]},index))})]})]}),showAdModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-xl p-8 max-w-md mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white mb-4\",children:\"Watching Ad...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Please wait while the ad loads...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"This will earn you 5 extra searches!\"})]})]})}),socialPostData.platform&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-800 rounded-xl p-6 max-w-md mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white mb-4\",children:\"Complete Social Post\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Platform\"}),/*#__PURE__*/_jsxs(\"select\",{value:socialPostData.platform,onChange:e=>setSocialPostData(_objectSpread(_objectSpread({},socialPostData),{},{platform:e.target.value})),className:\"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"twitter\",children:\"Twitter\"}),/*#__PURE__*/_jsx(\"option\",{value:\"instagram\",children:\"Instagram\"}),/*#__PURE__*/_jsx(\"option\",{value:\"facebook\",children:\"Facebook\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tiktok\",children:\"TikTok\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-300 mb-2\",children:\"Post URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:socialPostData.postUrl,onChange:e=>setSocialPostData(_objectSpread(_objectSpread({},socialPostData),{},{postUrl:e.target.value})),placeholder:\"https://...\",className:\"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSocialPost,disabled:!socialPostData.postUrl||socialPostMutation.isPending,className:\"flex-1 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white py-2 px-4 rounded-lg font-medium\",children:socialPostMutation.isPending?'Submitting...':'Submit'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSocialPostData({platform:'',postUrl:''}),className:\"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg\",children:\"Cancel\"})]})]})]})})]})});};// Task Card Component\nconst TaskCard=_ref3=>{let{icon,title,description,points,completed,progress=0,target=1,onAction,actionText,loading=false,disabled=false}=_ref3;const progressPercentage=target>1?progress/target*100:completed?100:0;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-700 rounded-lg p-4 border \".concat(completed?'border-green-500/50':'border-gray-600'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg \".concat(completed?'bg-green-500/20':'bg-purple-500/20'),children:completed?/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-400\"}):icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-white\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:description}),target>1&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 bg-gray-600 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-500 h-2 rounded-full transition-all duration-300\",style:{width:\"\".concat(progressPercentage,\"%\")}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-400\",children:[progress,\"/\",target]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-purple-400\",children:[\"+\",points]}),/*#__PURE__*/_jsx(\"button\",{onClick:onAction,disabled:disabled||loading,className:\"mt-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors \".concat(disabled?'bg-green-500/20 text-green-400 cursor-not-allowed':'bg-purple-600 hover:bg-purple-700 text-white'),children:loading?'Loading...':completed?'Completed':actionText})]})]})});};export default Profile;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}