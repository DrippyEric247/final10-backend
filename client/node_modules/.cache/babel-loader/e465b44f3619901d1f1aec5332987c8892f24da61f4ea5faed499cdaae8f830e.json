{"ast":null,"code":"import _objectSpread from\"C:/Users/ericv/final10/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// client/src/pages/Register.js\nimport React,{useEffect,useState}from'react';import{useNavigate,Link,useSearchParams}from'react-router-dom';import{useAuth}from'../context/AuthContext';import Final10Logo from'../components/Final10Logo';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){const{register}=useAuth();const nav=useNavigate();const[qs]=useSearchParams();const[err,setErr]=useState('');const[form,setForm]=useState({username:'',firstName:'',lastName:'',email:'',password:'',referralCode:''});// auto-fill ref code if coming from ?ref=XYZ\nuseEffect(()=>{const ref=qs.get('ref');if(ref)setForm(f=>_objectSpread(_objectSpread({},f),{},{referralCode:ref}));},[qs]);async function onSubmit(e){e.preventDefault();setErr('');try{await register(form);nav('/');// go to dashboard\n}catch(e){var _e$response,_e$response$data;setErr((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||'Registration failed');}}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-8\",children:/*#__PURE__*/_jsx(Final10Logo,{size:\"large\",showTaglines:true})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-4 text-center\",children:\"Join FINAL10\"}),err&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 text-red-400\",children:err}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full p-3 rounded bg-gray-900\",placeholder:\"Username\",name:\"username\",id:\"username\",value:form.username,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{username:e.target.value}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"p-3 rounded bg-gray-900\",placeholder:\"First name\",name:\"firstName\",id:\"firstName\",value:form.firstName,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{firstName:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"p-3 rounded bg-gray-900\",placeholder:\"Last name\",name:\"lastName\",id:\"lastName\",value:form.lastName,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{lastName:e.target.value}))})]}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full p-3 rounded bg-gray-900\",placeholder:\"Email\",name:\"email\",id:\"email\",value:form.email,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full p-3 rounded bg-gray-900\",placeholder:\"Password\",type:\"password\",name:\"password\",id:\"password\",value:form.password,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{password:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{className:\"w-full p-3 rounded bg-gray-900\",placeholder:\"Referral code (optional)\",name:\"referralCode\",id:\"referralCode\",value:form.referralCode,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{referralCode:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full p-3 rounded bg-yellow-400 text-black font-semibold\",children:\"Sign up\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 text-sm text-gray-400\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{className:\"underline\",to:\"/login\",children:\"Login\"})]})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}