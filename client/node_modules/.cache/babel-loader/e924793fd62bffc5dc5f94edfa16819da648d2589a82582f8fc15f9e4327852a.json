{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ericv\\\\final10\\\\client\\\\src\\\\pages\\\\PointsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PointsPage() {\n  _s();\n  const [points, setPoints] = useState(0);\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const token = localStorage.getItem(\"f10_token\"); // keep this consistent with your login/register\n\n  const fetchPoints = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/api/points\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n      if (res.ok) {\n        var _ref, _data$points;\n        setPoints((_ref = (_data$points = data.points) !== null && _data$points !== void 0 ? _data$points : data.balance) !== null && _ref !== void 0 ? _ref : 0);\n        setMessage(\"\");\n      } else {\n        setMessage(data.message || \"Error fetching points\");\n      }\n    } catch (err) {\n      setMessage(\"Server error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const claimDailyReward = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/api/points/daily-claim\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n      if (res.ok) {\n        var _ref2, _data$points2;\n        setPoints((_ref2 = (_data$points2 = data.points) !== null && _data$points2 !== void 0 ? _data$points2 : data.newBalance) !== null && _ref2 !== void 0 ? _ref2 : points);\n        setMessage(data.message || `+${data.added || 0} points added!`);\n      } else {\n        setMessage(data.message || \"Error claiming reward\");\n      }\n    } catch (err) {\n      setMessage(\"Server error\");\n    }\n  };\n  useEffect(() => {\n    fetchPoints();\n  }, []);\n  if (!token) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-6 text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold mb-2\",\n        children: \"Savvy Points\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please log in to view and claim points.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold mb-6\",\n      children: \"Savvy Points\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-neutral-300\",\n      children: \"Loading\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xl mb-4\",\n        children: [\"Your Balance: \", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-mono\",\n          children: points\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: claimDailyReward,\n        className: \"bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-2 rounded-lg shadow-lg font-semibold\",\n        children: \"Claim Daily Reward\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-4 text-green-400\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(PointsPage, \"PO+mLWI7AGT5UzOPBRayPeySHoE=\");\n_c = PointsPage;\nvar _c;\n$RefreshReg$(_c, \"PointsPage\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","PointsPage","_s","points","setPoints","message","setMessage","loading","setLoading","token","localStorage","getItem","fetchPoints","res","fetch","headers","Authorization","data","json","ok","_ref","_data$points","balance","err","claimDailyReward","method","_ref2","_data$points2","newBalance","added","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/ericv/final10/client/src/pages/PointsPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nexport default function PointsPage() {\r\n  const [points, setPoints] = useState(0);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const token = localStorage.getItem(\"f10_token\"); // keep this consistent with your login/register\r\n\r\n  const fetchPoints = async () => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/points\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setPoints(data.points ?? data.balance ?? 0);\r\n        setMessage(\"\");\r\n      } else {\r\n        setMessage(data.message || \"Error fetching points\");\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"Server error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const claimDailyReward = async () => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/points/daily-claim\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        setPoints(data.points ?? data.newBalance ?? points);\r\n        setMessage(data.message || `+${data.added || 0} points added!`);\r\n      } else {\r\n        setMessage(data.message || \"Error claiming reward\");\r\n      }\r\n    } catch (err) {\r\n      setMessage(\"Server error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => { fetchPoints(); }, []);\r\n\r\n  if (!token) {\r\n    return (\r\n      <div className=\"p-6 text-white\">\r\n        <h1 className=\"text-2xl font-bold mb-2\">Savvy Points</h1>\r\n        <p>Please log in to view and claim points.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Savvy Points</h1>\r\n\r\n      {loading ? (\r\n        <p className=\"text-neutral-300\">Loadingâ€¦</p>\r\n      ) : (\r\n        <>\r\n          <p className=\"text-xl mb-4\">\r\n            Your Balance: <span className=\"font-mono\">{points}</span>\r\n          </p>\r\n\r\n          <button\r\n            onClick={claimDailyReward}\r\n            className=\"bg-yellow-500 hover:bg-yellow-600 text-black px-6 py-2 rounded-lg shadow-lg font-semibold\"\r\n          >\r\n            Claim Daily Reward\r\n          </button>\r\n\r\n          {message && <p className=\"mt-4 text-green-400\">{message}</p>}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}