{"ast":null,"code":"var _process$env$REACT_AP;\n// client/src/lib/api.js\nimport axios from 'axios';\n\n// ---- Base URL (CRA uses REACT_APP_* vars) ----\nconst baseURL = ((_process$env$REACT_AP = process.env.REACT_APP_API_URL) === null || _process$env$REACT_AP === void 0 ? void 0 : _process$env$REACT_AP.replace(/\\/$/, '')) || 'http://localhost:5000/api';\n\n// Single Axios instance for the whole app\nexport const api = axios.create({\n  baseURL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// ---- Auth token helpers ----\nconst saved = localStorage.getItem('token');\nif (saved) api.defaults.headers.common.Authorization = `Bearer ${saved}`;\nexport function setAuthToken(token) {\n  if (token) {\n    localStorage.setItem('token', token);\n    api.defaults.headers.common.Authorization = `Bearer ${token}`;\n  } else {\n    localStorage.removeItem('token');\n    delete api.defaults.headers.common.Authorization;\n  }\n}\n\n// ---- AUTH ----\nexport async function registerUser(payload) {\n  // payload: { email, username, firstName, lastName, password, referralCode? }\n  const {\n    data\n  } = await api.post('/auth/signup', payload);\n  if (data !== null && data !== void 0 && data.token) setAuthToken(data.token);\n  return data;\n}\nexport async function loginUser({\n  email,\n  password\n}) {\n  const {\n    data\n  } = await api.post('/auth/login', {\n    email,\n    password\n  });\n  if (data !== null && data !== void 0 && data.token) setAuthToken(data.token);\n  return data;\n}\n\n// ---- POINTS ----\nexport async function getMyPoints() {\n  const {\n    data\n  } = await api.get('/points/me');\n  return data; // { balance, lastClaimAt, ... }\n}\nexport async function getPointsHistory() {\n  const {\n    data\n  } = await api.get('/points/history');\n  return data; // [{_id, type, amount, note, createdAt}, ...]\n}\nexport async function claimDailyLogin() {\n  const {\n    data\n  } = await api.post('/points/claim');\n  return data; // { balance, added, nextClaimAt }\n}\nexport async function redeemPoints(amount) {\n  const {\n    data\n  } = await api.post('/points/redeem', {\n    amount\n  });\n  return data;\n}\n\n// ---- (Optional) ALERTS – keep these to satisfy existing imports ----\nexport async function getAlerts() {\n  const {\n    data\n  } = await api.get('/alerts');\n  return data;\n}\nexport async function createAlert(payload) {\n  const {\n    data\n  } = await api.post('/alerts', payload);\n  return data;\n}\nexport async function deleteAlert(id) {\n  const {\n    data\n  } = await api.delete(`/alerts/${id}`);\n  return data;\n}\nexport async function toggleAlert(id, enabled) {\n  const {\n    data\n  } = await api.patch(`/alerts/${id}`, {\n    enabled\n  });\n  return data;\n}","map":{"version":3,"names":["axios","baseURL","_process$env$REACT_AP","process","env","REACT_APP_API_URL","replace","api","create","headers","saved","localStorage","getItem","defaults","common","Authorization","setAuthToken","token","setItem","removeItem","registerUser","payload","data","post","loginUser","email","password","getMyPoints","get","getPointsHistory","claimDailyLogin","redeemPoints","amount","getAlerts","createAlert","deleteAlert","id","delete","toggleAlert","enabled","patch"],"sources":["C:/Users/ericv/final10/client/src/lib/api.js"],"sourcesContent":["// client/src/lib/api.js\r\nimport axios from 'axios';\r\n\r\n// ---- Base URL (CRA uses REACT_APP_* vars) ----\r\nconst baseURL =\r\n  process.env.REACT_APP_API_URL?.replace(/\\/$/, '') || 'http://localhost:5000/api';\r\n\r\n// Single Axios instance for the whole app\r\nexport const api = axios.create({\r\n  baseURL,\r\n  headers: { 'Content-Type': 'application/json' },\r\n});\r\n\r\n// ---- Auth token helpers ----\r\nconst saved = localStorage.getItem('token');\r\nif (saved) api.defaults.headers.common.Authorization = `Bearer ${saved}`;\r\n\r\nexport function setAuthToken(token) {\r\n  if (token) {\r\n    localStorage.setItem('token', token);\r\n    api.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  } else {\r\n    localStorage.removeItem('token');\r\n    delete api.defaults.headers.common.Authorization;\r\n  }\r\n}\r\n\r\n// ---- AUTH ----\r\nexport async function registerUser(payload) {\r\n  // payload: { email, username, firstName, lastName, password, referralCode? }\r\n  const { data } = await api.post('/auth/signup', payload);\r\n  if (data?.token) setAuthToken(data.token);\r\n  return data;\r\n}\r\n\r\nexport async function loginUser({ email, password }) {\r\n  const { data } = await api.post('/auth/login', { email, password });\r\n  if (data?.token) setAuthToken(data.token);\r\n  return data;\r\n}\r\n\r\n// ---- POINTS ----\r\nexport async function getMyPoints() {\r\n  const { data } = await api.get('/points/me');\r\n  return data; // { balance, lastClaimAt, ... }\r\n}\r\n\r\nexport async function getPointsHistory() {\r\n  const { data } = await api.get('/points/history');\r\n  return data; // [{_id, type, amount, note, createdAt}, ...]\r\n}\r\n\r\nexport async function claimDailyLogin() {\r\n  const { data } = await api.post('/points/claim');\r\n  return data; // { balance, added, nextClaimAt }\r\n}\r\n\r\nexport async function redeemPoints(amount) {\r\n  const { data } = await api.post('/points/redeem', { amount });\r\n  return data;\r\n}\r\n\r\n// ---- (Optional) ALERTS – keep these to satisfy existing imports ----\r\nexport async function getAlerts() {\r\n  const { data } = await api.get('/alerts');\r\n  return data;\r\n}\r\nexport async function createAlert(payload) {\r\n  const { data } = await api.post('/alerts', payload);\r\n  return data;\r\n}\r\nexport async function deleteAlert(id) {\r\n  const { data } = await api.delete(`/alerts/${id}`);\r\n  return data;\r\n}\r\nexport async function toggleAlert(id, enabled) {\r\n  const { data } = await api.patch(`/alerts/${id}`, { enabled });\r\n  return data;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}