{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{Award,Bell,TrendingUp,Clock,Users,Gift,Target}from'lucide-react';import{getCommunityGoals,getCommunityProgress,claimCommunityReward}from'../lib/api';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CommunityGoals=()=>{var _goals$savvyPoints,_goals$activeAlerts,_goals$auctionsWon,_goals$timeSaved;const[goals,setGoals]=useState(null);const[progress,setProgress]=useState(null);const[loading,setLoading]=useState(true);const[claiming,setClaiming]=useState(false);useEffect(()=>{loadCommunityData();},[]);const loadCommunityData=async()=>{try{const[goalsData,progressData]=await Promise.all([getCommunityGoals(),getCommunityProgress()]);setGoals(goalsData);setProgress(progressData);}catch(error){console.error('Failed to load community data:',error);// Fallback data for development\nsetGoals({savvyPoints:{target:1000000,reward:{points:10000,subscription:1}},activeAlerts:{target:100000,reward:{points:10000,subscription:1}},auctionsWon:{target:100000,reward:{points:10000,subscription:1}},timeSaved:{target:8760,reward:{points:10000,subscription:1}}// 1 year in hours\n});setProgress({savvyPoints:750000,activeAlerts:45000,auctionsWon:32000,timeSaved:5200,canClaimReward:true});}finally{setLoading(false);}};const handleClaimReward=async()=>{if(claiming)return;setClaiming(true);try{const result=await claimCommunityReward();toast.success(\"Reward claimed! You received \".concat(result.points,\" Savvy Points and \").concat(result.subscription,\" month subscription!\"));loadCommunityData();// Refresh data\n}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to claim reward');}finally{setClaiming(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8\",children:[1,2,3,4].map(i=>/*#__PURE__*/_jsxs(\"div\",{className:\"card text-center animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-700 rounded mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-8 bg-gray-700 rounded mb-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-700 rounded\"})]},i))});}const goalItems=[{key:'savvyPoints',label:'Savvy Points',icon:/*#__PURE__*/_jsx(Award,{className:\"w-5 h-5\"}),current:(progress===null||progress===void 0?void 0:progress.savvyPoints)||0,target:(goals===null||goals===void 0?void 0:(_goals$savvyPoints=goals.savvyPoints)===null||_goals$savvyPoints===void 0?void 0:_goals$savvyPoints.target)||1000000,unit:'',color:'from-purple-500 to-purple-600'},{key:'activeAlerts',label:'Active Alerts',icon:/*#__PURE__*/_jsx(Bell,{className:\"w-5 h-5\"}),current:(progress===null||progress===void 0?void 0:progress.activeAlerts)||0,target:(goals===null||goals===void 0?void 0:(_goals$activeAlerts=goals.activeAlerts)===null||_goals$activeAlerts===void 0?void 0:_goals$activeAlerts.target)||100000,unit:'',color:'from-blue-500 to-blue-600'},{key:'auctionsWon',label:'Auctions Won',icon:/*#__PURE__*/_jsx(TrendingUp,{className:\"w-5 h-5\"}),current:(progress===null||progress===void 0?void 0:progress.auctionsWon)||0,target:(goals===null||goals===void 0?void 0:(_goals$auctionsWon=goals.auctionsWon)===null||_goals$auctionsWon===void 0?void 0:_goals$auctionsWon.target)||100000,unit:'',color:'from-green-500 to-green-600'},{key:'timeSaved',label:'Time Saved',icon:/*#__PURE__*/_jsx(Clock,{className:\"w-5 h-5\"}),current:(progress===null||progress===void 0?void 0:progress.timeSaved)||0,target:(goals===null||goals===void 0?void 0:(_goals$timeSaved=goals.timeSaved)===null||_goals$timeSaved===void 0?void 0:_goals$timeSaved.target)||8760,unit:'h',color:'from-yellow-500 to-yellow-600'}];const formatNumber=num=>{if(num>=1000000)return\"\".concat((num/1000000).toFixed(1),\"M\");if(num>=1000)return\"\".concat((num/1000).toFixed(1),\"K\");return num.toString();};const getProgressPercentage=(current,target)=>{return Math.min(current/target*100,100);};return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6},className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-6 h-6 text-purple-400\"}),\"Community Goals\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"Help us reach these milestones together!\"})]}),(progress===null||progress===void 0?void 0:progress.canClaimReward)&&/*#__PURE__*/_jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:0.95},onClick:handleClaimReward,disabled:claiming,className:\"btn bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Gift,{className:\"w-4 h-4\"}),claiming?'Claiming...':'Claim Reward!']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card bg-gradient-to-r from-purple-900/30 to-pink-900/30 border-purple-500/30 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Target,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white\",children:\"Community Reward\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300 text-sm\",children:[\"When we hit any goal, all participants get \",/*#__PURE__*/_jsx(\"span\",{className:\"text-yellow-300 font-semibold\",children:\"10,000 Savvy Points\"}),' ',\"and a \",/*#__PURE__*/_jsx(\"span\",{className:\"text-yellow-300 font-semibold\",children:\"1-month subscription\"}),\" (worth $100)!\"]})]})]})})]}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.1},className:\"grid grid-cols-2 md:grid-cols-4 gap-6\",children:goalItems.map((item,index)=>{const percentage=getProgressPercentage(item.current,item.target);const isCompleted=percentage>=100;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.1+index*0.1},className:\"card text-center relative overflow-hidden \".concat(isCompleted?'ring-2 ring-green-400 bg-green-500/10':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 h-1 bg-gray-700 w-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r \".concat(item.color,\" transition-all duration-1000 ease-out\"),style:{width:\"\".concat(percentage,\"%\")}})}),isCompleted&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 right-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-xs\",children:\"\\u2713\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-purple-400 mb-2 flex justify-center\",children:item.icon}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-white mb-1\",children:[formatNumber(item.current),item.unit]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-sm mb-2\",children:item.label}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[formatNumber(item.current),\" / \",formatNumber(item.target)]}),isCompleted&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs text-green-400 font-semibold\",children:\"Goal Reached! \\uD83C\\uDF89\"})]},item.key);})}),/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.6,delay:0.2},className:\"mt-6 card bg-gray-800/50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-white\",children:\"Community Progress\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"Updated daily \\u2022 Next update in 23 hours\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-purple-400\",children:[goalItems.filter(item=>getProgressPercentage(item.current,item.target)>=100).length,\"/4\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-sm\",children:\"Goals Completed\"})]})]})})]});};export default CommunityGoals;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}