{"ast":null,"code":"import _objectSpread from\"C:/Users/ericv/final10/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{getAlerts,createAlert,toggleAlert,deleteAlert}from'../lib/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Alerts(){const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[error,setError]=useState('');const[form,setForm]=useState({name:'',keywords:'',maxPrice:'',minConfidence:70,sources:['ebay']});const load=async()=>{try{setLoading(true);const data=await getAlerts();setItems(data);}catch(e){setError(e.message);}finally{setLoading(false);}};useEffect(()=>{load();},[]);const onChange=e=>{const{name,value}=e.target;setForm(f=>_objectSpread(_objectSpread({},f),{},{[name]:value}));};const onSubmit=async e=>{e.preventDefault();setError('');setSaving(true);try{const payload={name:form.name.trim(),keywords:form.keywords.split(',').map(s=>s.trim()).filter(Boolean),maxPrice:form.maxPrice?Number(form.maxPrice):undefined,minConfidence:Number(form.minConfidence)||70,sources:form.sources// keep defaults for now\n};await createAlert(payload);setForm({name:'',keywords:'',maxPrice:'',minConfidence:70,sources:['ebay']});await load();}catch(e){setError(e.message);}finally{setSaving(false);}};const onToggle=async id=>{await toggleAlert(id);await load();};const onDelete=async id=>{await deleteAlert(id);await load();};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-b from-[#0b0b0b] to-[#121212] text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4 py-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-extrabold mb-6\",children:\"Deal Alerts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mb-8\",children:\"Get notified when items that match your rules pop up.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"card bg-gray-900/60 border border-yellow-500/20 rounded-xl p-6 mb-10 grid grid-cols-1 md:grid-cols-4 gap-4\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-4 text-red-400 text-sm\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-300 mb-1\",children:\"Alert name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-primary w-full\",name:\"name\",value:form.name,onChange:onChange,placeholder:\"e.g. iPhone 14 under $500\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-300 mb-1\",children:\"Keywords (comma separated)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-primary w-full\",name:\"keywords\",value:form.keywords,onChange:onChange,placeholder:\"iphone, 14, unlocked\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-300 mb-1\",children:\"Max price (optional)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-primary w-full\",type:\"number\",name:\"maxPrice\",value:form.maxPrice,onChange:onChange,placeholder:\"500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm text-gray-300 mb-1\",children:\"Min confidence\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-primary w-full\",type:\"number\",min:\"0\",max:\"100\",name:\"minConfidence\",value:form.minConfidence,onChange:onChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 flex items-end\",children:/*#__PURE__*/_jsx(\"button\",{disabled:saving,className:\"btn-ghost bg-gradient-to-r from-purple-600 to-yellow-500 rounded-lg px-6 py-3 font-semibold\",children:saving?'Savingâ€¦':'Create alert'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400\",children:\"Loading alerts\\u2026\"}):items.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400\",children:\"No alerts yet \\u2014 create your first one above.\"}):items.map((a,index)=>{var _a$keywords,_a$sources;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900/60 border border-gray-700 rounded-xl p-5 flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-lg\",children:a.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-400 text-sm mt-1\",children:[(_a$keywords=a.keywords)===null||_a$keywords===void 0?void 0:_a$keywords.join(', '),\" \",a.maxPrice?\"\\u2022 \\u2264 $\".concat(a.maxPrice):'',\" \\u2022 min \",a.minConfidence,\"% \\u2022 \",(_a$sources=a.sources)===null||_a$sources===void 0?void 0:_a$sources.join(', ')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[a.isActive?'Active':'Paused',\" \\u2022 Updated \",new Date(a.updatedAt).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onToggle(a._id),className:\"px-3 py-2 rounded bg-gray-800 hover:bg-gray-700 text-sm\",children:a.isActive?'Pause':'Resume'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(a._id),className:\"px-3 py-2 rounded bg-red-600 hover:bg-red-500 text-sm\",children:\"Delete\"})]})]},\"alert-\".concat(a._id||index,\"-\").concat(index));})})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}