{"ast":null,"code":"const authHeaders = () => {\n  const token = localStorage.getItem(\"token\");\n  return {\n    \"Content-Type\": \"application/json\",\n    Authorization: token ? `Bearer ${token}` : \"\"\n  };\n};\n// client/src/lib/api.js\nconst BASE = 'http://localhost:5000';\n\n// Fetch current points + activity\nexport async function getPoints() {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${BASE}/api/points`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  if (!res.ok) throw new Error((await res.json()).message || 'Failed to load points');\n  return res.json();\n}\n\n// Claim daily login points\nexport async function claimDaily() {\n  const token = localStorage.getItem('token');\n  const res = await fetch(`${BASE}/api/points/claim`, {\n    method: 'POST',\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || 'Claim failed');\n  return data;\n}\n\n// ====== POINTS API ======\n\nexport async function getMyPoints() {\n  const res = await fetch(`${BASE}/api/points/me`, {\n    headers: authHeaders()\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Failed to load points\");\n  return data; // { balance, claimedToday }\n}\nexport async function getPointsHistory() {\n  const res = await fetch(`${BASE}/api/points/history`, {\n    headers: authHeaders()\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Failed to load history\");\n  return data; // array\n}\nexport async function claimDailyLogin() {\n  const res = await fetch(`${BASE}/api/points/claim/daily-login`, {\n    method: \"POST\",\n    headers: authHeaders()\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Claim failed\");\n  return data; // { added }\n}\nexport async function redeemPoints(amount) {\n  const res = await fetch(`${BASE}/api/points/redeem`, {\n    method: \"POST\",\n    headers: authHeaders(),\n    body: JSON.stringify({\n      amount\n    })\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Redeem failed\");\n  return data; // { spent }\n}\n\n/* ===========================\r\n   AUTH FUNCTIONS\r\n   =========================== */\nexport async function registerUser(payload) {\n  const res = await fetch(`${BASE}/api/auth/register`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(payload)\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Register failed\");\n  if (data.token) setAuthToken(data.token);\n  return data;\n}\nexport async function loginUser(payload) {\n  const res = await fetch(`${BASE}/api/auth/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(payload)\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Login failed\");\n  if (data.token) setAuthToken(data.token);\n  return data;\n}\nexport function setAuthToken(token) {\n  if (token) {\n    localStorage.setItem(\"token\", token);\n  } else {\n    localStorage.removeItem(\"token\");\n  }\n}\n\n/* ===========================\r\n   ALERTS FUNCTIONS\r\n   =========================== */\nexport async function getAlerts() {\n  const res = await fetch(`${BASE}/api/alerts`, {\n    headers: authHeaders()\n  });\n  if (!res.ok) throw new Error(\"Failed to load alerts\");\n  return res.json();\n}\nexport async function createAlert(payload) {\n  const res = await fetch(`${BASE}/api/alerts`, {\n    method: \"POST\",\n    headers: authHeaders(),\n    body: JSON.stringify(payload)\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Create failed\");\n  return data;\n}\nexport async function toggleAlert(id) {\n  const res = await fetch(`${BASE}/api/alerts/${id}/toggle`, {\n    method: \"PATCH\",\n    headers: authHeaders()\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Toggle failed\");\n  return data;\n}\nexport async function deleteAlert(id) {\n  const res = await fetch(`${BASE}/api/alerts/${id}`, {\n    method: \"DELETE\",\n    headers: authHeaders()\n  });\n  if (!res.ok) throw new Error(\"Delete failed\");\n  return true;\n}","map":{"version":3,"names":["authHeaders","token","localStorage","getItem","Authorization","BASE","getPoints","res","fetch","headers","ok","Error","json","message","claimDaily","method","data","getMyPoints","getPointsHistory","claimDailyLogin","redeemPoints","amount","body","JSON","stringify","registerUser","payload","setAuthToken","loginUser","setItem","removeItem","getAlerts","createAlert","toggleAlert","id","deleteAlert"],"sources":["C:/Users/ericv/final10/client/src/lib/api.js"],"sourcesContent":["const authHeaders = () => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return {\r\n    \"Content-Type\": \"application/json\",\r\n    Authorization: token ? `Bearer ${token}` : \"\",\r\n  };\r\n};\r\n// client/src/lib/api.js\r\nconst BASE = 'http://localhost:5000';\r\n\r\n// Fetch current points + activity\r\nexport async function getPoints() {\r\n  const token = localStorage.getItem('token');\r\n  const res = await fetch(`${BASE}/api/points`, {\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  if (!res.ok) throw new Error((await res.json()).message || 'Failed to load points');\r\n  return res.json();\r\n}\r\n\r\n// Claim daily login points\r\nexport async function claimDaily() {\r\n  const token = localStorage.getItem('token');\r\n  const res = await fetch(`${BASE}/api/points/claim`, {\r\n    method: 'POST',\r\n    headers: { Authorization: `Bearer ${token}` },\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || 'Claim failed');\r\n  return data;\r\n}\r\n\r\n// ====== POINTS API ======\r\n\r\nexport async function getMyPoints() {\r\n  const res = await fetch(`${BASE}/api/points/me`, { headers: authHeaders() });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Failed to load points\");\r\n  return data; // { balance, claimedToday }\r\n}\r\n\r\nexport async function getPointsHistory() {\r\n  const res = await fetch(`${BASE}/api/points/history`, { headers: authHeaders() });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Failed to load history\");\r\n  return data; // array\r\n}\r\n\r\nexport async function claimDailyLogin() {\r\n  const res = await fetch(`${BASE}/api/points/claim/daily-login`, {\r\n    method: \"POST\",\r\n    headers: authHeaders(),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Claim failed\");\r\n  return data; // { added }\r\n}\r\n\r\nexport async function redeemPoints(amount) {\r\n  const res = await fetch(`${BASE}/api/points/redeem`, {\r\n    method: \"POST\",\r\n    headers: authHeaders(),\r\n    body: JSON.stringify({ amount }),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Redeem failed\");\r\n  return data; // { spent }\r\n}\r\n\r\n/* ===========================\r\n   AUTH FUNCTIONS\r\n   =========================== */\r\nexport async function registerUser(payload) {\r\n  const res = await fetch(`${BASE}/api/auth/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Register failed\");\r\n  if (data.token) setAuthToken(data.token);\r\n  return data;\r\n}\r\n\r\nexport async function loginUser(payload) {\r\n  const res = await fetch(`${BASE}/api/auth/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Login failed\");\r\n  if (data.token) setAuthToken(data.token);\r\n  return data;\r\n}\r\n\r\nexport function setAuthToken(token) {\r\n  if (token) {\r\n    localStorage.setItem(\"token\", token);\r\n  } else {\r\n    localStorage.removeItem(\"token\");\r\n  }\r\n}\r\n\r\n/* ===========================\r\n   ALERTS FUNCTIONS\r\n   =========================== */\r\nexport async function getAlerts() {\r\n  const res = await fetch(`${BASE}/api/alerts`, { headers: authHeaders() });\r\n  if (!res.ok) throw new Error(\"Failed to load alerts\");\r\n  return res.json();\r\n}\r\n\r\nexport async function createAlert(payload) {\r\n  const res = await fetch(`${BASE}/api/alerts`, {\r\n    method: \"POST\",\r\n    headers: authHeaders(),\r\n    body: JSON.stringify(payload),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Create failed\");\r\n  return data;\r\n}\r\n\r\nexport async function toggleAlert(id) {\r\n  const res = await fetch(`${BASE}/api/alerts/${id}/toggle`, {\r\n    method: \"PATCH\",\r\n    headers: authHeaders(),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Toggle failed\");\r\n  return data;\r\n}\r\n\r\nexport async function deleteAlert(id) {\r\n  const res = await fetch(`${BASE}/api/alerts/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: authHeaders(),\r\n  });\r\n  if (!res.ok) throw new Error(\"Delete failed\");\r\n  return true;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}