{"ast":null,"code":"const BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\nconst authHeaders = () => {\n  const token = localStorage.getItem(\"token\");\n  return {\n    \"Content-Type\": \"application/json\",\n    Authorization: token ? `Bearer ${token}` : \"\"\n  };\n};\n\n/* ===========================\r\n   AUTH FUNCTIONS\r\n   =========================== */\nexport async function registerUser(payload) {\n  const res = await fetch(`${BASE}/api/auth/register`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(payload)\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Register failed\");\n  if (data.token) setAuthToken(data.token);\n  return data;\n}\nexport async function loginUser(payload) {\n  const res = await fetch(`${BASE}/api/auth/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(payload)\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Login failed\");\n  if (data.token) setAuthToken(data.token);\n  return data;\n}\nexport function setAuthToken(token) {\n  if (token) {\n    localStorage.setItem(\"token\", token);\n  } else {\n    localStorage.removeItem(\"token\");\n  }\n}\n\n/* ===========================\r\n   ALERTS FUNCTIONS\r\n   =========================== */\nexport async function getAlerts() {\n  const res = await fetch(`${BASE}/api/alerts`, {\n    headers: authHeaders()\n  });\n  if (!res.ok) throw new Error(\"Failed to load alerts\");\n  return res.json();\n}\nexport async function createAlert(payload) {\n  const res = await fetch(`${BASE}/api/alerts`, {\n    method: \"POST\",\n    headers: authHeaders(),\n    body: JSON.stringify(payload)\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Create failed\");\n  return data;\n}\nexport async function toggleAlert(id) {\n  const res = await fetch(`${BASE}/api/alerts/${id}/toggle`, {\n    method: \"PATCH\",\n    headers: authHeaders()\n  });\n  const data = await res.json();\n  if (!res.ok) throw new Error(data.message || \"Toggle failed\");\n  return data;\n}\nexport async function deleteAlert(id) {\n  const res = await fetch(`${BASE}/api/alerts/${id}`, {\n    method: \"DELETE\",\n    headers: authHeaders()\n  });\n  if (!res.ok) throw new Error(\"Delete failed\");\n  return true;\n}","map":{"version":3,"names":["BASE","process","env","REACT_APP_API_URL","authHeaders","token","localStorage","getItem","Authorization","registerUser","payload","res","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","message","setAuthToken","loginUser","setItem","removeItem","getAlerts","createAlert","toggleAlert","id","deleteAlert"],"sources":["C:/Users/ericv/final10/client/src/lib/api.js"],"sourcesContent":["const BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\r\n\r\nconst authHeaders = () => {\r\n  const token = localStorage.getItem(\"token\");\r\n  return {\r\n    \"Content-Type\": \"application/json\",\r\n    Authorization: token ? `Bearer ${token}` : \"\",\r\n  };\r\n};\r\n\r\n/* ===========================\r\n   AUTH FUNCTIONS\r\n   =========================== */\r\nexport async function registerUser(payload) {\r\n  const res = await fetch(`${BASE}/api/auth/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Register failed\");\r\n  if (data.token) setAuthToken(data.token);\r\n  return data;\r\n}\r\n\r\nexport async function loginUser(payload) {\r\n  const res = await fetch(`${BASE}/api/auth/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify(payload),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Login failed\");\r\n  if (data.token) setAuthToken(data.token);\r\n  return data;\r\n}\r\n\r\nexport function setAuthToken(token) {\r\n  if (token) {\r\n    localStorage.setItem(\"token\", token);\r\n  } else {\r\n    localStorage.removeItem(\"token\");\r\n  }\r\n}\r\n\r\n/* ===========================\r\n   ALERTS FUNCTIONS\r\n   =========================== */\r\nexport async function getAlerts() {\r\n  const res = await fetch(`${BASE}/api/alerts`, { headers: authHeaders() });\r\n  if (!res.ok) throw new Error(\"Failed to load alerts\");\r\n  return res.json();\r\n}\r\n\r\nexport async function createAlert(payload) {\r\n  const res = await fetch(`${BASE}/api/alerts`, {\r\n    method: \"POST\",\r\n    headers: authHeaders(),\r\n    body: JSON.stringify(payload),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Create failed\");\r\n  return data;\r\n}\r\n\r\nexport async function toggleAlert(id) {\r\n  const res = await fetch(`${BASE}/api/alerts/${id}/toggle`, {\r\n    method: \"PATCH\",\r\n    headers: authHeaders(),\r\n  });\r\n  const data = await res.json();\r\n  if (!res.ok) throw new Error(data.message || \"Toggle failed\");\r\n  return data;\r\n}\r\n\r\nexport async function deleteAlert(id) {\r\n  const res = await fetch(`${BASE}/api/alerts/${id}`, {\r\n    method: \"DELETE\",\r\n    headers: authHeaders(),\r\n  });\r\n  if (!res.ok) throw new Error(\"Delete failed\");\r\n  return true;\r\n}\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}