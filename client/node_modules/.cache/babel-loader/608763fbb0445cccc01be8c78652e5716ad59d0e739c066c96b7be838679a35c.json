{"ast":null,"code":"import React from\"react\";import{useQuery}from\"@tanstack/react-query\";import{Link}from\"react-router-dom\";import ebayService from\"../services/ebayService\";import{useAuth}from\"../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Trending(){const{user}=useAuth();const{data,status,error}=useQuery({queryKey:[\"trending\"],queryFn:async()=>{const trendingItems=await ebayService.getTrendingItems('all',20);// expected shape: { trendingAuctions: [...], trendingCategories: [...] }\nreturn{trendingAuctions:trendingItems.items||[],trendingCategories:trendingItems.categories||[]};},enabled:!!user// Only run query if user is logged in\n});if(!user){return/*#__PURE__*/_jsxs(\"div\",{className:\"feed-wrap\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"feed-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Trending\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Hot categories and auctions right now.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"feed-status\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Please \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"login\"}),\" to view trending auctions\"]})})]});}if(status===\"loading\")return/*#__PURE__*/_jsx(\"div\",{className:\"feed-status\",children:\"Loading trending auctions\\u2026\"});if(status===\"error\")return/*#__PURE__*/_jsxs(\"div\",{className:\"feed-status\",children:[\"Error: \",String(error)]});if(!data)return/*#__PURE__*/_jsx(\"div\",{className:\"feed-status\",children:\"No trending data available\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"feed-wrap\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"feed-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Trending\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"Hot categories and auctions right now.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chip-row\",children:((data===null||data===void 0?void 0:data.trendingCategories)||[]).map((c,index)=>/*#__PURE__*/_jsxs(\"span\",{className:\"chip chip-outline\",children:[c._id,\" \\u2022 \",c.count]},\"category-\".concat(c._id,\"-\").concat(index)))}),/*#__PURE__*/_jsx(\"div\",{className:\"feed-grid\",children:((data===null||data===void 0?void 0:data.trendingAuctions)||[]).map((auction,index)=>{var _auction$images,_auction$images$,_auction$images2,_auction$images2$;return/*#__PURE__*/_jsxs(\"article\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"thumb\",children:[/*#__PURE__*/_jsx(\"img\",{src:((_auction$images=auction.images)===null||_auction$images===void 0?void 0:(_auction$images$=_auction$images[0])===null||_auction$images$===void 0?void 0:_auction$images$.url)||\"https://via.placeholder.com/400x300/1f2937/8b5cf6?text=Product\",alt:((_auction$images2=auction.images)===null||_auction$images2===void 0?void 0:(_auction$images2$=_auction$images2[0])===null||_auction$images2$===void 0?void 0:_auction$images2$.alt)||auction.title,loading:\"lazy\",onError:e=>{e.target.src=\"https://via.placeholder.com/400x300/1f2937/8b5cf6?text=Product\";}}),/*#__PURE__*/_jsx(\"span\",{className:\"chip\",children:\"eBay\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"meta\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:auction.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"price\",children:[\"$\",auction.currentBid||auction.startingPrice]}),/*#__PURE__*/_jsxs(\"span\",{className:\"end\",children:[\"Ends \",auction.timeRemaining||'Soon']})]}),auction.aiScore&&/*#__PURE__*/_jsxs(\"div\",{className:\"ai-scores\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"score\",children:[\"\\uD83D\\uDD25 \",auction.aiScore.trendingScore||0]}),/*#__PURE__*/_jsxs(\"span\",{className:\"score\",children:[\"\\uD83D\\uDC8E \",auction.aiScore.dealPotential||0]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\",children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary\",to:\"/auction/\".concat(auction._id),children:\"View Auction\"})})]},\"trending-auction-\".concat(auction._id||auction.id||index,\"-\").concat(index));})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}