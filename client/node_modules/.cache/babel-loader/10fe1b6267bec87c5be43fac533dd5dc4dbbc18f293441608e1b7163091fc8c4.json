{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ericv\\\\final10\\\\client\\\\src\\\\pages\\\\Register.js\",\n  _s = $RefreshSig$();\n// client/src/pages/Register.js\nimport { useSearchParams } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\n// ... your other imports\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n  const [params] = useSearchParams();\n  const [form, setForm] = useState({\n    firstName: '',\n    lastName: '',\n    username: '',\n    email: '',\n    password: '',\n    referralCode: ''\n  });\n  const [err, setErr] = useState('');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const ref = params.get('ref');\n    if (ref) setForm(f => ({\n      ...f,\n      referralCode: ref\n    }));\n  }, [params]);\n\n  // ...\n\n  const [referral, setReferral] = useState(\"\");\n  useEffect(() => {\n    const urlRef = new URLSearchParams(window.location.search).get(\"ref\");\n    if (urlRef) {\n      setReferral(urlRef);\n      // optional: persist if user navigates away\n      localStorage.setItem(\"pending_ref\", urlRef);\n    } else {\n      const cached = localStorage.getItem(\"pending_ref\");\n      if (cached) setReferral(cached);\n    }\n  }, []);\n\n  // On submit:\n  const payload = {\n    firstName,\n    lastName,\n    username,\n    email,\n    password,\n    referralCode: referral || undefined\n  };\n\n  // include referralCode when you submit\n\n  const onChange = e => setForm({\n    ...form,\n    [e.target.name]: e.target.value\n  });\n  const onSubmit = async e => {\n    e.preventDefault();\n    setErr('');\n    setLoading(true);\n    try {\n      // Use your api helper or fetch/axios\n      const res = await fetch('/api/auth/signup', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(form)\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error((data === null || data === void 0 ? void 0 : data.message) || 'Signup failed');\n\n      // success → store token, clear pending ref\n      localStorage.removeItem('pending_ref');\n      localStorage.setItem('token', data.token);\n      // redirect wherever:\n      window.location.href = '/points'; // or '/auctions'\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: onSubmit,\n    children: [err && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"username\",\n      value: form.username,\n      onChange: onChange,\n      placeholder: \"Username\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"firstName\",\n      value: form.firstName,\n      onChange: onChange,\n      placeholder: \"First name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"lastName\",\n      value: form.lastName,\n      onChange: onChange,\n      placeholder: \"Last name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"email\",\n      value: form.email,\n      onChange: onChange,\n      placeholder: \"Email\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      value: form.password,\n      onChange: onChange,\n      placeholder: \"Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"hidden\",\n      name: \"referralCode\",\n      value: form.referralCode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: loading,\n      children: loading ? 'Creating…' : 'Sign up'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"nSpbYg9b+IvYdYBejs3ywqZ0d+w=\", false, function () {\n  return [useSearchParams];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["useSearchParams","useEffect","useState","jsxDEV","_jsxDEV","Register","_s","params","form","setForm","firstName","lastName","username","email","password","referralCode","err","setErr","loading","setLoading","ref","get","f","referral","setReferral","urlRef","URLSearchParams","window","location","search","localStorage","setItem","cached","getItem","payload","undefined","onChange","e","target","name","value","onSubmit","preventDefault","res","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","message","removeItem","token","href","children","style","color","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","type","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ericv/final10/client/src/pages/Register.js"],"sourcesContent":["// client/src/pages/Register.js\nimport { useSearchParams } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\n// ... your other imports\n\nexport default function Register() {\n  const [params] = useSearchParams();\n  const [form, setForm] = useState({\n    firstName: '', lastName: '', username: '',\n    email: '', password: '', referralCode: ''\n  });\n  const [err, setErr] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const ref = params.get('ref');\n    if (ref) setForm(f => ({ ...f, referralCode: ref }));\n  }, [params]);\n\n  // ...\n  \n  const [referral, setReferral] = useState(\"\");\n  \n  useEffect(() => {\n    const urlRef = new URLSearchParams(window.location.search).get(\"ref\");\n    if (urlRef) {\n      setReferral(urlRef);\n      // optional: persist if user navigates away\n      localStorage.setItem(\"pending_ref\", urlRef);\n    } else {\n      const cached = localStorage.getItem(\"pending_ref\");\n      if (cached) setReferral(cached);\n    }\n  }, []);\n  \n  // On submit:\n  const payload = { firstName, lastName, username, email, password, referralCode: referral || undefined };\n  \n  // include referralCode when you submit\n \n  const onChange = e => setForm({ ...form, [e.target.name]: e.target.value });\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    setErr('');\n    setLoading(true);\n    try {\n      // Use your api helper or fetch/axios\n      const res = await fetch('/api/auth/signup', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(form),\n      });\n      const data = await res.json();\n      if (!res.ok) throw new Error(data?.message || 'Signup failed');\n\n      // success → store token, clear pending ref\n      localStorage.removeItem('pending_ref');\n      localStorage.setItem('token', data.token);\n      // redirect wherever:\n      window.location.href = '/points'; // or '/auctions'\n    } catch (e) {\n      setErr(e.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={onSubmit}>\n      {err && <p style={{color:'red'}}>{err}</p>}\n      <input name=\"username\" value={form.username} onChange={onChange} placeholder=\"Username\" />\n      <input name=\"firstName\" value={form.firstName} onChange={onChange} placeholder=\"First name\" />\n      <input name=\"lastName\" value={form.lastName} onChange={onChange} placeholder=\"Last name\" />\n      <input name=\"email\" value={form.email} onChange={onChange} placeholder=\"Email\" />\n      <input type=\"password\" name=\"password\" value={form.password} onChange={onChange} placeholder=\"Password\" />\n      {/* keep referralCode hidden but present */}\n      <input type=\"hidden\" name=\"referralCode\" value={form.referralCode} />\n      <button disabled={loading}>{loading ? 'Creating…' : 'Sign up'}</button>\n    </form>\n  );\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}